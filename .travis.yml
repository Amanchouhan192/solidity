#------------------------------------------------------------------------------
# TravisCI configuration file for solidity.
#
# The documentation for solidity is hosted at:
#
# http://solidity.readthedocs.org
#
# ------------------------------------------------------------------------------
# This file is part of solidity.
#
# solidity is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# solidity is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with solidity.  If not, see <http://www.gnu.org/licenses/>
#
# (c) 2016-2017 solidity contributors.
#------------------------------------------------------------------------------

language: cpp

branches:
    # We need to whitelist the branches which we want to have "push" automation,
    # this includes tags (which are treated as branches by travis).
    # Pull request automation is not constrained to this set of branches.
    only:
        - develop
        - release
        - /^v[0-9]/

env:
    global:
        - ENCRYPTION_LABEL="6d4541b72666"
        - SOLC_BUILD_TYPE=RelWithDebInfo
        - SOLC_EMSCRIPTEN=Off
        - SOLC_INSTALL_DEPS_TRAVIS=On
        - SOLC_RELEASE=On
        - SOLC_TESTS=On
        - SOLC_STOREBYTECODE=Off
        - SOLC_DOCKER=Off

matrix:
    include:
        # OS X Mavericks (10.9)
        # https://en.wikipedia.org/wiki/OS_X_Mavericks
        #
# Disabled because of problems on travis.
#        - os: osx
#          osx_image: beta-xcode6.2
#          env:
#              - ZIP_SUFFIX=osx-mavericks

        # OS X Yosemite (10.10)
        # https://en.wikipedia.org/wiki/OS_X_Yosemite
        #
#        - os: osx
#          osx_image: xcode7.1
#          env:
#              # Workaround for "macOS - Yosemite, El Capitan and Sierra hanging?"
#              # https://github.com/ethereum/solidity/issues/894
#              - SOLC_TESTS=Off
#              - ZIP_SUFFIX=osx-yosemite

        # OS X El Capitan (10.11)
        # https://en.wikipedia.org/wiki/OS_X_El_Capitan
        #
#        - os: osx
#          osx_image: xcode7.3
#          env:
#              # The use of Debug config here ONLY for El Capitan is a workaround for "The Heisenbug"
#              # See https://github.com/ethereum/webthree-umbrella/issues/565
#              - SOLC_BUILD_TYPE=Debug
#              # Workaround for "macOS - Yosemite, El Capitan and Sierra hanging?"
#              # https://github.com/ethereum/solidity/issues/894
#              - SOLC_TESTS=Off
#              - ZIP_SUFFIX=osx-elcapitan

        # macOS Sierra (10.12)
        # https://en.wikipedia.org/wiki/MacOS_Sierra
        #
#       - os: osx
#          osx_image: xcode8
#          env:
#              # Look like "The Heisenbug" is occurring here too, so we'll do the same workaround.
#              # See https://travis-ci.org/ethereum/solidity/jobs/150240930
#              - SOLC_BUILD_TYPE=Debug
#              # Workaround for "macOS - Yosemite, El Capitan and Sierra hanging?"
#              # https://github.com/ethereum/solidity/issues/894
#              - SOLC_TESTS=Off
#              - ZIP_SUFFIX=macos-sierra

git:
cache:
install:
before_script:
script:
deploy:
